<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Apple Books Excerpt Remover</title>

    <!-- Meta Tags for SEO -->
    <meta
      name="description"
      content="Easily remove 'Excerpt From' and unwanted text from content copied from Apple Books. Fast, simple, and automatic text cleaner."
    />
    <meta
      name="keywords"
      content="Apple Books, Excerpt Remover, Text Cleaner, Copy Text Tool, Remove Excerpt, Apple Books Text"
    />
    <meta name="author" content="xnivaxhzne" />

    <!-- Open Graph for social sharing -->
    <meta property="og:title" content="Apple Books Excerpt Remover" />
    <meta
      property="og:description"
      content="Remove unwanted 'Excerpt From' text from Apple Books content with this simple online tool."
    />
    <meta
      property="og:url"
      content="https://xnivaxhzne.github.io/apple-books-excerpt-remover/"
    />
    <meta property="og:type" content="website" />
    <meta
      property="og:image"
      content="https://xnivaxhzne.github.io/apple-books-excerpt-remover/assets/og.png"
    />

    <!-- Twitter Card -->
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content="Apple Books Excerpt Remover" />
    <meta
      name="twitter:description"
      content="Quickly clean Apple Books text with this online tool. Removes 'Excerpt From' with one click."
    />
    <meta
      name="twitter:image"
      content="https://xnivaxhzne.github.io/apple-books-excerpt-remover/assets/og.png"
    />

    <!-- Structured Data for SEO -->
    <script type="application/ld+json">
      {
        "@context": "https://schema.org",
        "@type": "WebApplication",
        "name": "Apple Books Excerpt Remover",
        "url": "https://xnivaxhzne.github.io/apple-books-excerpt-remover/",
        "description": "Remove 'Excerpt From' text from Apple Books content quickly and easily.",
        "author": {
          "@type": "Person",
          "name": "xnivaxhzne"
        },
        "applicationCategory": "Utilities",
        "operatingSystem": "All",
        "browserRequirements": "Requires JavaScript"
      }
    </script>

    <style>
      * {
        box-sizing: border-box;
      }

      body {
        font-family: Arial, sans-serif;
        margin: 50px;
        background-color: #1e1e1e;
        color: #ffffff;
        transition: background-color 0.3s, color 0.3s;
      }

      textarea {
        width: 100%;
        height: 30vh;
        padding: 10px;
        box-sizing: border-box;
        margin-bottom: 20px;
        background-color: #333333;
        color: #ffffff;
        border: 1px solid #ccc;
      }

      pre {
        white-space: pre-wrap;
        width: 100%;
        padding: 10px;
        border: 1px solid #ccc;
        border-radius: 4px;
        background-color: #333333;
        color: #aeadad;
        display: none;
      }

      .copiedToClipboard {
        display: none;
      }

      .show {
        display: block;
      }
    </style>
  </head>

  <body class="dark-mode">
    <h1>Apple Books Excerpt Remover</h1>
    <p>
      Paste your text below, and the processed text will be copied to your
      clipboard automatically. The processed content will be shown below the
      input box.
    </p>
    <textarea
      id="inputText"
      placeholder="Paste your text here..."
      oninput="processText()"
      aria-label="Text input for Apple Books excerpt remover"
    ></textarea>
    <h3 class="copiedToClipboard">Copied to clipboard ✅</h3>
    <pre id="outputText" aria-live="polite"></pre>

    <script>
      function processText() {
        const inputText = document.getElementById("inputText").value;

        // Split the text into lines
        const lines = inputText.split("\n");

        // Create an array to hold the final lines
        const filteredLines = [];

        // Iterate over each line
        for (let i = 0; i < lines.length; i++) {
          const line = lines[i].trim();

          // If the current line contains "Excerpt From", stop processing further
          if (line.includes("Excerpt From")) {
            break; // Exit the loop and ignore all remaining lines
          }

          // Add the line to the filteredLines if it doesn't match any condition
          filteredLines.push(lines[i]);
        }

        // Join the filtered lines back into a single string
        let processedText = filteredLines.join("\n");

        // Remove starting and ending quotes
        processedText = processedText
          .trim()
          .replace(/^“/, "")
          .replace(/”$/, "");

        // Copy the processed text to the clipboard
        navigator.clipboard
          .writeText(processedText)
          .then(() => {
            console.log("Text copied to clipboard");
            // Display the processed text and clear the textarea
            document.querySelector(".copiedToClipboard").classList.add("show");
            const outputTextEl = document.getElementById("outputText");
            outputTextEl.classList.add("show");
            outputTextEl.textContent = processedText;
            const textarea = document.getElementById("inputText");
            textarea.value = ""; // Clear the input
            textarea.focus(); // Refocus for new input
          })
          .catch((err) => {
            console.error("Failed to copy text: ", err);
          });

        setTimeout(() => {
          document.querySelector(".copiedToClipboard").classList.remove("show");
          document.getElementById("outputText").classList.remove("show");
        }, 2000);
      }
    </script>
  </body>
</html>
